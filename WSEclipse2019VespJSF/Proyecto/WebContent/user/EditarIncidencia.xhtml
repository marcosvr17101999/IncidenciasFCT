<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

<h:head>
	<style>
<!--
textarea {
	resize: none;
	max-height: 16px;
	max-width: 350px;
	min-height: 16px;
	min-width: 350px;
}
-->
</style>

	<f:metadata>
		<f:viewParam name="incidencia"
			value="#{backingModificacionIncidencia.i}" />
		<f:viewAction action="#{backingModificacionIncidencia.init()}" />

	</f:metadata>
</h:head>
<h:body> 

<a href="../user/home.xhtml">Inicio</a>
<h:panelGroup id="panel">
<div>
SECCION 1<br></br>
DATOS DE LA INCIDENCIA<br></br>
idIncidencia --------><br></br>
	<h:outputText value="#{backingModificacionIncidencia.i.idIncidencia}"></h:outputText>
	<br></br>
detalleDepartamento --------><br></br>
	<h:outputText
		value="#{backingModificacionIncidencia.i.departamento.detalleDepartamento}"></h:outputText>
	<br></br>
descripcionEstado --------><br></br>
	<h:outputText
		value="#{backingModificacionIncidencia.i.estadoincidencia.descripcionEstado}"></h:outputText>
	<br></br>
fechaIncidencia --------><br></br>
	<h:outputText
		value="#{backingModificacionIncidencia.i.fechaIncidencia}"></h:outputText>
	<br></br>
detalleIncidencia --------><br></br>
	<h:outputText
		value="#{backingModificacionIncidencia.i.detalleIncidencia}"></h:outputText>
	<br></br>
descripcionPrioridad --------><br></br>
	<h:outputText
		value="#{backingModificacionIncidencia.i.prioridadBean.descripcionPrioridad}"></h:outputText>
	<br></br>
email --------><br></br>
	<h:outputText
		value="#{backingModificacionIncidencia.i.usuarioBean.email}"></h:outputText>
	<br></br>
	<br></br>
</div>

<div>
SECCION 2<br></br>
COMENTARIOS<br></br>
<h:panelGroup id="resultadoBusqueda">
	<h:form id="frmResultadoBusquedaIncidencias" >
		<h:dataTable var="socio" value="#{backingModificacionIncidencia.i.comentarios}"  >
			<f:facet name="header">
				<h:outputText value="Listado de Socios"></h:outputText>
			</f:facet>
			<h:column id="idComentario">
				<f:facet name="header">
					<h:outputText value="detallesComentario">
					</h:outputText>
				</f:facet>
				<h:outputText value="#{socio.idcomentario}">
				</h:outputText>
			</h:column>
			<h:column id="detallesComentario">
				<f:facet name="header">
					<h:outputText value="detallesComentario">
					</h:outputText>
				</f:facet>
				<h:outputText value="#{socio.detallesComentario}">
				</h:outputText>
			</h:column>
			<h:column id="fechaComentario">
				<f:facet name="header">
					<h:outputText value="detallesComentario">
					</h:outputText>
				</f:facet>
				<h:outputText value="#{socio.fechaComentario}">
				</h:outputText>
			</h:column>
			<h:column id="emailComentario">
				<f:facet name="header">
					<h:outputText value="detallesComentario">
					</h:outputText>
				</f:facet>
				<h:outputText value="#{socio.usuario.email}">
				</h:outputText>
			</h:column>
		</h:dataTable>
	</h:form>
	<br></br>
	
	</h:panelGroup>
	</div>
	</h:panelGroup>
	<div>
SECCION 3<br></br>
FORMULARIO MODIFICACION<br></br>
	<h:form>
Comentario:
	<h:inputTextarea id="asun"
			value="#{backingModificacionIncidencia.comentario}"></h:inputTextarea>
		<h:outputText value="--#{backingModificacionIncidencia.u.email}"></h:outputText>

		<h:selectOneMenu value="#{backingModificacionIncidencia.estado}"
			rendered="#{backingModificacionIncidencia.u.grupousuario.id.idrol==1 and backingModificacionIncidencia.i.estadoincidencia.idEstado==1}">
			
			<f:selectItem itemLabel="Nueva" itemValue="1" />
			<f:selectItem itemLabel="Abierta" itemValue="3" />
			<f:selectItem itemLabel="Rechazada" itemValue="6" />
			<f:ajax render="@all" />
		</h:selectOneMenu>

		<h:selectOneMenu value="#{backingModificacionIncidencia.estado}"
			rendered="#{backingModificacionIncidencia.u.grupousuario.id.idrol==1 and backingModificacionIncidencia.i.estadoincidencia.idEstado==3}">
			

			<f:selectItem itemLabel="Abierta" itemValue="3" />
			<f:selectItem itemLabel="Espera" itemValue="2" />
			<f:selectItem itemLabel="Resuelta" itemValue="4" />
			<f:ajax render="@all" />
		</h:selectOneMenu>
		<h:selectOneMenu value="#{backingModificacionIncidencia.estado}"
			rendered="#{backingModificacionIncidencia.u.grupousuario.id.idrol==1 and backingModificacionIncidencia.i.estadoincidencia.idEstado==2}">
		

			<f:selectItem itemLabel="Espera" itemValue="2" />
			<f:selectItem itemLabel="Abierta" itemValue="3" />
			<f:ajax render="@all" />
		</h:selectOneMenu>
		<h:selectOneMenu value="#{backingModificacionIncidencia.estado}"
			rendered="#{backingModificacionIncidencia.u.grupousuario.id.idrol==1 and backingModificacionIncidencia.i.estadoincidencia.idEstado==4}">
		

			<f:selectItem itemLabel="resuelta" itemValue="4" />
			<f:selectItem itemLabel="Cerrada" itemValue="5" />
			<f:ajax render="@all" />
		</h:selectOneMenu>

		<h:selectOneMenu
			value="#{backingModificacionIncidencia.idDepartamento}"
			rendered="#{backingModificacionIncidencia.u.grupousuario.id.idrol==1 and backingModificacionIncidencia.i.estadoincidencia.idEstado==1 and backingModificacionIncidencia.estado==3}">
			<f:selectItem itemLabel="--Seleccione un departamento--"
				itemDisabled="true" />
			<f:selectItems
				value="#{backingModificacionIncidencia.listadoDepartamentos}"
				var="departamento" itemValue="#{departamento.idDepartamento}"
				itemLabel="#{departamento.detalleDepartamento}" />
		</h:selectOneMenu>

<!--                         IDROL2                        -->
<h:selectOneMenu value="#{backingModificacionIncidencia.estado}"
			rendered="#{backingModificacionIncidencia.u.grupousuario.id.idrol==2 and backingModificacionIncidencia.i.estadoincidencia.idEstado==1}">
		
			<f:selectItem itemLabel="Nueva" itemValue="1" />
			<f:selectItem itemLabel="Abierta" itemValue="3" />
			<f:selectItem itemLabel="Rechazada" itemValue="6" />
			<f:ajax render="@all" />
		</h:selectOneMenu>

		<h:selectOneMenu value="#{backingModificacionIncidencia.estado}"
			rendered="#{backingModificacionIncidencia.u.grupousuario.id.idrol==2 and backingModificacionIncidencia.i.estadoincidencia.idEstado==3}">
			

			<f:selectItem itemLabel="Abierta" itemValue="3" />
			<f:selectItem itemLabel="Espera" itemValue="2" />
			<f:selectItem itemLabel="Resuelta" itemValue="4" />
			<f:ajax render="@all" />
		</h:selectOneMenu>
		<h:selectOneMenu value="#{backingModificacionIncidencia.estado}"
			rendered="#{backingModificacionIncidencia.u.grupousuario.id.idrol==2 and backingModificacionIncidencia.i.estadoincidencia.idEstado==2}">
			

			<f:selectItem itemLabel="Abierta" itemValue="3" />
			<f:selectItem itemLabel="Espera" itemValue="2" />
			<f:ajax render="@all" />
		</h:selectOneMenu>
		<h:selectOneMenu value="#{backingModificacionIncidencia.estado}"
			rendered="#{backingModificacionIncidencia.u.grupousuario.id.idrol==2 and backingModificacionIncidencia.i.estadoincidencia.idEstado==4}">
			<f:selectItem itemLabel="resuelta" itemValue="4" />
			<f:selectItem itemLabel="Cerrada" itemValue="5" />
			<f:ajax render="@all" />
		</h:selectOneMenu>
		<h:selectOneMenu
			value="#{backingModificacionIncidencia.idDepartamento}"
			rendered="#{backingModificacionIncidencia.u.grupousuario.id.idrol==2 and backingModificacionIncidencia.i.estadoincidencia.idEstado==1 and backingModificacionIncidencia.estado==3}}">
			<f:selectItem itemLabel="--Seleccione un departamento--"
				itemDisabled="true" />
			<f:selectItems
				value="#{backingModificacionIncidencia.listadoDepartamentos}"
				var="departamento" itemValue="#{departamento.idDepartamento}"
				itemLabel="#{departamento.detalleDepartamento}" />
		</h:selectOneMenu>

<!--                         IDROL3                        -->


		<h:selectOneMenu value="#{backingModificacionIncidencia.estado}"
			rendered="#{backingModificacionIncidencia.u.grupousuario.id.idrol==3 and backingModificacionIncidencia.i.estadoincidencia.idEstado==3}">
			

			<f:selectItem itemLabel="Abierta" itemValue="3" />
			<f:selectItem itemLabel="Espera" itemValue="2" />
			<f:selectItem itemLabel="Resuelta" itemValue="4" />
			<f:ajax render="@all" />
		</h:selectOneMenu>
		<h:selectOneMenu value="#{backingModificacionIncidencia.estado}"
			rendered="#{backingModificacionIncidencia.u.grupousuario.id.idrol==3 and backingModificacionIncidencia.i.estadoincidencia.idEstado==2}">
			

			<f:selectItem itemLabel="Espera" itemValue="2" />
			<f:selectItem itemLabel="Abierta" itemValue="3" />
			<f:ajax render="@all" />
		</h:selectOneMenu>
		
<!--                         IDROL4                        -->	
		<h:commandButton id="mostrar"
			action="#{backingModificacionIncidencia.guardarVariable()}"
			value="Buscar" >
				<f:ajax execute="@form" render="@all resultadoBusqueda "></f:ajax>
		</h:commandButton>
		<h:messages globalOnly="true" infoClass="advertencia"></h:messages>
	</h:form>
	</div>
</h:body>
</html>
